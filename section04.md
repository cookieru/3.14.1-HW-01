[<< Вернуться к оглалению](README.md) | [< Предыдущий раздел](section03.md) | [Следующий раздел >](sectionXX.md)

# НУЖНО РАЗДЕЛИТЬ ЭТОТ РАЗДЕЛ НА НЕСКОЛЬКО ПО-МЕНЬШЕ

Запись, просмотр и фиксация изменений
=====================================

Состояние файлов под версионным контролем
-----------------------------------------

Каждый файл в вашем рабочем каталоге может находиться в одном из двух состояний: __отслеживаемым__ и __неотслеживаемым (untracked)__.

_Отслеживаемые файлы_ - это файлы, которые уже присутствовали в вашем последнем коммите. Они могут быть __неизмененными (unmodified)__, __измененными (modified)__ или __подготовленными к коммиту (staged)__.

_Неотслеживаемые файлы_ - это все остальные файлы в вашем рабочем каталоге, которые не были включены в последний коммит и не были подготовлены к коммиту. 

>При клонировании репозитория все файлы будут отслеживаемыми и неизмененными, так как вы только что извлекли их и не вносили в них никаких изменений. Как только вы начнете вносить изменения в файлы, Git будет рассматривать их как измененные, так как они отличаются от последнего коммита. Вы можете проиндексировать эти изменения и зафиксировать их коммитом, а затем процесс повторяется снова и снова.

![Жизненый цикл состояний файлов]()

Команда git status
----------------------------------------------

Один из основных инструментов, который помогает определить состояние файлов в Git, - это команда `git status`. Когда вы выполняете эту команду сразу после клонирования репозитория, вы получаете информацию о статусе файлов. Результат может выглядеть примерно так:

![Скрин git status в новом репозитории]()

Это означает, что ваш рабочий каталог является чистым, то есть в нем нет отслеживаемых измененных файлов. Git также не обнаружил неотслеживаемых файлов, иначе они были бы перечислены. Команда также даёт вам информацию о текущей ветке.

Если вы добавили новый файл _README.md_ в свой проект, то при выполнении команды `git status` вы увидите его в разделе __Untracked files__.

![Скрин git status с новым файлом]()

Это означает, что Git обнаружил файл, который не был отслеживаемым на предыдущем коммите. Файл не будет автоматически добавлен в следующий коммит, пока вы не укажете это явно. То есть, необходимо явно сообщить Git о том, что хотите включить этот файл в следующий коммит, используя команду `git add`. После этого Git начнет отслеживать изменения в файле и будет включать его в коммиты.

Команда git add
----------------

Команда `git add` является многофункциональной и используется для различных целей при работе с Git. В основном, она используется для добавления новых файлов под версионный контроль и индексации изменений перед коммитом.

Когда вы выполняете `git add`, вы фактически говорите Git'у присмотреться к определенному файлу или набору файлов и включить их в следующий коммит, создавая таким образом новую версию вашего проекта.

Таким образом, можно сказать, что `git add` - это способ указать Git, какие изменения или файлы вы хотите добавить в следующую версию вашего проекта, которая будет сохранена коммитом.

### Отслеживание новых файлов.

Чтобы добавить новый файл под контроль версий в Git, необходимо использовать команду `git add`. В вашем случае, чтобы начать отслеживание файла _README.md_, вы можете выполнить команду:

    git add README.md

После этого, если вы выполните команду `git status`, увидите, что файл README.md стал отслеживаемым и добавленным в индекс

![Скрин git status с новым файлом, отслеживается]()

Вы можете заметить, что файл теперь находится в секции __Changes to be committed__ в выводе команды `git status`. Это означает, что файл был проиндексирован, и если вы сейчас выполните коммит, то версия файла, которая была на момент выполнения команды `git add`, будет добавлена в историю изменений.

> Когда вы предварительно инициализировали Git в вашем проекте с помощью команды [`git init`](section03.md), а затем выполнели `git add` для файлов, это было сделано с целью добавления файлов в вашу систему контроля версий.

Команда `git add` принимает в качестве параметра путь к файлу или каталогу. Если вы указываете каталог, то команда рекурсивно добавит все файлы из этого каталога в индекс.

### Индексация изменённых файлов. Продолжение git add

Если вы внесли изменения в отслеживаемый файл _README.md_ и запустите команду `git status`, то результат будет выглядеть примерно так:

![Скрин git status с измененным файлом]()

Файл _README.md_ будет отображаться в секции __Changes not staged for commit__ - это означает, что файл был изменен в рабочем каталоге, но не был добавлен в индекс. 
Чтобы добавить его в индекс, вам необходимо выполнить команду `git add`.

При следующем запуске `git status`, вы увидите, что файл _README.md_ будет отображаться в секции __Changes to be committed__ - это означает, что файл был успешно добавлен в индекс и готов к коммиту:

![Скрин git status с измененным файлом, отслеживается]()

Команда git commit
------------------

### Простой ввод команды

Теперь, когда ваш индекс находится в нужном вам состоянии, вы можете зафиксировать свои изменения. Запомните, что все файлы, которые до этого не были проиндексированы (то есть файлы, созданные или измененные вами, но которые вы не добавили с помощью команды `git add` перед редактированием), не будут включены в этот коммит. Они останутся неотслеженными файлами на вашем компьютере.

Простейший способ зафиксировать изменения - это ввести команду 

    git commit

После ввода этой команды откроется выбранный вами текстовый редактор, в котором будет отображен следующий текст:

![текстовый редактор с сообщением]()

Вы можете заметить, что комментарий по умолчанию для коммита содержит закомментированный результат команды `git status` и одну пустую строку сверху. Вы можете удалить эти комментарии и написать свое собственное сообщение, либо оставить их, чтобы напомнить себе, что именно вы фиксируете.

### Параметр -v. Отобразить изменения

Если вам нужно более подробное описание того, что вы изменили, вы можете добавить аргумент __-v__ при выполнении команды `git commit`. 

    git commit -v

Это приведет к тому, что в комментарий также будет включена информация о дельте/diff изменений, позволяя вам точно увидеть все изменения, которые вы сделали. 

![текстовый редактор с дельтой]()


### Параметр -m. Ввести сообщение при вызове команды

Есть и ещё один способ - вы можете написать свой комментарий к коммиту прямо в командной строке, указав его после параметра __-m__.

    git commit -m "add README.md"

![вывод команды git commit -m]()

В результате коммита вы получили некоторую информацию о нем: на какой ветке был выполнен коммит, контрольную сумму SHA-1 коммита, количество измененных файлов, а также статистику по добавленным и удаленным строкам внутри этого коммита.

> Cообщение коммита является важной частью версионирования кода. Рекомендуется писать информативные и точные комментарии, которые будут полезны в будущем при просмотре истории изменений

### Параметр -a. Игнорирование индексации

Индекс в Git является полезным инструментом для создания коммитов в нужном вам виде, но иногда он может быть немного сложным в процессе работы. Если вам хочется пропустить этап индексации и сразу сделать коммит, Git предоставляет простой способ. При добавлении флага __-a__, Git автоматически проиндексирует каждый уже отслеживаемый файл на момент коммита, позволяя вам обойтись без использования `git add`.

    git commit -a

![вывод git status]()

![использование git commit -a]()

> Однако, важно обратить внимание, что в данном случае вам не нужно делать `git add` перед коммитом. Это удобно, но будьте осторожны – флаг __-a__ может включить в коммит нежелательные изменения. Необходимо внимательно проверять состояние файлов перед коммитом, чтобы удостовериться, что только нужные изменения включены в коммит.

[<< Вернуться к оглалению](README.md) | [< Предыдущий раздел](section03.md) | [Следующий раздел >](sectionXX.md)